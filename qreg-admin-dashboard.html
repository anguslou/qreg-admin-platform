<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QReg Admin Dashboard - RegTech Platform</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #FEFEFE;
            color: #2B2D42;
            line-height: 1.6;
        }

        /* Layout */
        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #FEFEFE;
            border-right: 1px solid #EDF2F4;
            padding: 24px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            padding: 0 24px 32px;
            font-size: 24px;
            font-weight: 700;
            color: #1B4332;
        }

        .nav-section {
            margin-bottom: 8px;
        }

        .nav-header {
            padding: 8px 24px;
            font-size: 12px;
            font-weight: 600;
            color: #8D99AE;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            color: #8D99AE;
            text-decoration: none;
            transition: all 0.15s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #F8F9FA;
            color: #2B2D42;
        }

        .nav-item.active {
            background: #1B4332;
            color: #FFFFFF;
        }

        .nav-icon {
            margin-right: 12px;
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 0;
        }

        /* Header */
        .header {
            background: #FFFFFF;
            border-bottom: 1px solid #EDF2F4;
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .header-title {
            font-size: 24px;
            font-weight: 600;
            color: #2B2D42;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .notification-badge {
            position: relative;
            cursor: pointer;
        }

        .notification-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #D62828;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 11px;
            font-weight: 600;
        }

        .profile-menu {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #1B4332;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 32px;
        }

        /* Widget Grid */
        .widget-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }

        .widget {
            background: #FFFFFF;
            border: 1px solid #EDF2F4;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .widget-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #EDF2F4;
        }

        .widget-icon {
            font-size: 24px;
            margin-right: 12px;
        }

        .widget-title {
            font-size: 14px;
            font-weight: 600;
            color: #2B2D42;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .widget-content {
            padding: 8px 0;
        }

        /* Business Overview Widget (spans 2 columns) */
        .widget-large {
            grid-column: span 2;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .metric-item {
            flex: 1;
        }

        .metric-label {
            font-size: 12px;
            color: #8D99AE;
            margin-bottom: 4px;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: #2B2D42;
        }

        .metric-change {
            font-size: 12px;
            margin-left: 8px;
        }

        .metric-change.positive {
            color: #40916C;
        }

        .metric-change.negative {
            color: #D62828;
        }

        /* Status Widget */
        .status-list {
            list-style: none;
        }

        .status-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #F8F9FA;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-left {
            display: flex;
            align-items: center;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .status-indicator.green {
            background: #40916C;
        }

        .status-indicator.yellow {
            background: #F77F00;
        }

        .status-indicator.red {
            background: #D62828;
        }

        .status-name {
            font-size: 14px;
            font-weight: 500;
            color: #2B2D42;
        }

        .status-time {
            font-size: 12px;
            color: #8D99AE;
        }

        /* AI Performance Widget */
        .gauge-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 0;
        }

        .gauge-value {
            font-size: 48px;
            font-weight: 700;
            color: #40916C;
        }

        .gauge-label {
            font-size: 14px;
            color: #8D99AE;
            margin-top: 8px;
        }

        .performance-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 600;
            color: #2B2D42;
        }

        .stat-label {
            font-size: 12px;
            color: #8D99AE;
        }

        /* Subscription Widget */
        .donut-chart {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 120px;
            margin: 16px 0;
            position: relative;
        }

        .donut-center {
            position: absolute;
            text-align: center;
        }

        .donut-total {
            font-size: 24px;
            font-weight: 700;
            color: #2B2D42;
        }

        .donut-label {
            font-size: 12px;
            color: #8D99AE;
        }

        .subscription-legend {
            list-style: none;
            margin-top: 16px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px 0;
        }

        .legend-left {
            display: flex;
            align-items: center;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 8px;
        }

        /* Activity Feed Widget */
        .activity-feed {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: start;
            padding: 12px 0;
            border-bottom: 1px solid #F8F9FA;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 16px;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 14px;
            color: #2B2D42;
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 12px;
            color: #8D99AE;
        }

        /* Alert Widget */
        .alert-list {
            list-style: none;
        }

        .alert-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
        }

        .alert-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .alert-text {
            font-size: 14px;
            color: #2B2D42;
        }

        /* Widget Actions */
        .widget-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #EDF2F4;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
            text-decoration: none;
            display: inline-block;
            border: none;
        }

        .btn-primary {
            background: #1B4332;
            color: #FFFFFF;
        }

        .btn-primary:hover {
            background: #2D5A47;
        }

        .btn-secondary {
            background: transparent;
            color: #1B4332;
            border: 1px solid #1B4332;
        }

        .btn-secondary:hover {
            background: #EDF2F4;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .modal-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid #EDF2F4;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2B2D42;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            color: #8D99AE;
        }

        .modal-close:hover {
            background: #F8F9FA;
        }

        .modal-body {
            padding: 24px;
        }

        /* Professional Delight Enhancements */
        .live-metric {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .live-metric:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(27, 67, 50, 0.15);
        }

        .live-metric::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(64,145,108,0.1), transparent);
            animation: shimmer 4s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .pulse-indicator {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Gentle Micro-interactions */
        .widget {
            transition: all 0.25s ease;
        }

        .widget:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.12);
        }

        .nav-item {
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: #40916C;
            transform: translateX(-3px);
            transition: transform 0.3s ease;
        }

        .nav-item:hover::before {
            transform: translateX(0);
        }

        .nav-item.active::before {
            transform: translateX(0);
        }

        /* Delightful Button States */
        .btn {
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Success Celebration */
        .celebration {
            animation: celebrate 0.6s ease-out;
        }

        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Loading States */
        .loading {
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 40%, rgba(255,255,255,0.8) 50%, transparent 60%);
            animation: loading-sweep 1.5s infinite;
        }

        @keyframes loading-sweep {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Enhanced Status Indicators */
        .status-indicator.green {
            position: relative;
        }

        .status-indicator.green::before {
            content: '';
            position: absolute;
            left: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background: rgba(64, 145, 108, 0.2);
            border-radius: 50%;
            animation: pulse-ring 2s infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: translateY(-50%) scale(0.8);
                opacity: 1;
            }
            100% {
                transform: translateY(-50%) scale(1.4);
                opacity: 0;
            }
        }

        /* Contextual Tooltips */
        .contextual-tip {
            position: relative;
            cursor: help;
        }

        .contextual-tip::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background: #2B2D42;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .contextual-tip::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #2B2D42;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .contextual-tip:hover::after,
        .contextual-tip:hover::before {
            opacity: 1;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2B2D42;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .tooltip:hover::after {
            opacity: 1;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #EDF2F4;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #40916C, #52B788);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Footer */
        .footer {
            padding: 16px 32px;
            border-top: 1px solid #EDF2F4;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #8D99AE;
        }

        /* Responsive Design */
        @media (max-width: 1199px) {
            .widget-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .widget-large {
                grid-column: span 2;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .widget-grid {
                grid-template-columns: 1fr;
            }
            
            .widget-large {
                grid-column: span 1;
            }
            
            .dashboard-content {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">QReg Admin</div>
            
            <div class="nav-section">
                <div class="nav-header">Business Dashboard</div>
                <a href="#" class="nav-item active">
                    <span class="nav-icon">📊</span>
                    <span>Main Dashboard</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-header">Regulatory Data</div>
                <a href="regulatory-monitor.html" class="nav-item">
                    <span class="nav-icon">🔍</span>
                    <span>Data Sources Monitor</span>
                </a>
                <a href="regulatory-monitor.html#collection-health" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">✅</span>
                    <span>Collection Health</span>
                </a>
                <a href="document-library.html" class="nav-item">
                    <span class="nav-icon">📄</span>
                    <span>Document Library</span>
                </a>
                <a href="graph-rag.html" class="nav-item">
                    <span class="nav-icon">🌐</span>
                    <span>Graph RAG</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-header">AI System</div>
                <a href="ai-performance.html" class="nav-item">
                    <span class="nav-icon">🤖</span>
                    <span>Performance Dashboard</span>
                </a>
                <a href="ai-performance.html#quality-control" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">🎯</span>
                    <span>Quality Control</span>
                </a>
                <a href="ai-performance.html#bias-correction" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">⚖️</span>
                    <span>Bias Correction</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-header">Users & Subscriptions</div>
                <a href="user-management.html" class="nav-item">
                    <span class="nav-icon">👥</span>
                    <span>User Management</span>
                </a>
                <a href="user-management.html#subscription-dashboard" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">💳</span>
                    <span>Subscription Dashboard</span>
                </a>
                <a href="payment-management.html" class="nav-item">
                    <span class="nav-icon">💰</span>
                    <span>Payment Management</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-header">Analytics</div>
                <a href="analytics-dashboard.html" class="nav-item">
                    <span class="nav-icon">📈</span>
                    <span>Business Analytics</span>
                </a>
                <a href="analytics-dashboard.html#platform-usage" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">📊</span>
                    <span>Platform Usage</span>
                </a>
                <a href="analytics-dashboard.html#business-intelligence" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">💡</span>
                    <span>Business Intelligence</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-header">System Admin</div>
                <a href="system-admin.html" class="nav-item">
                    <span class="nav-icon">⚕️</span>
                    <span>System Health</span>
                </a>
                <a href="system-admin.html#alerts" class="nav-item" style="padding-left: 48px;">
                    <span class="nav-icon">🚨</span>
                    <span>Alerts</span>
                </a>
            </div>
        </nav>
        
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 class="header-title">Business Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="notification-badge" title="Click to clear all notifications">
                        <span>🔔</span>
                        <span class="notification-count">3</span>
                    </div>
                    <div class="profile-menu">
                        <div class="avatar">JW</div>
                        <span>John Wong</span>
                        <span>▼</span>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Widget Grid -->
                <div class="widget-grid">
                    <!-- Business Overview Widget (2x1 span) -->
                    <div class="widget widget-large">
                        <div class="widget-header">
                            <span class="widget-icon">📈</span>
                            <h2 class="widget-title">Business Performance</h2>
                        </div>
                        <div class="widget-content">
                            <div class="metric-row">
                                <div class="metric-item live-metric contextual-tip" data-tip="Real-time subscriber count updates every 30 seconds">
                                    <div class="metric-label">Active Subscribers</div>
                                    <div>
                                        <span class="metric-value" id="subscriber-count">127</span>
                                        <span class="metric-change positive">↑12% this month</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%;"></div>
                                    </div>
                                </div>
                                <div class="metric-item live-metric contextual-tip" data-tip="Target: $300K MRR - you're 95% there!">
                                    <div class="metric-label">Monthly Revenue</div>
                                    <div>
                                        <span class="metric-value" id="revenue-count">$285K</span>
                                        <span class="metric-change positive">↑18% growth</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 95%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-item">
                                    <div class="metric-label">Platform Queries</div>
                                    <div>
                                        <span class="metric-value">1,247</span>
                                        <span class="metric-change">today</span>
                                    </div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-label">Satisfaction</div>
                                    <div>
                                        <span class="metric-value">4.6⭐</span>
                                        <span class="metric-change positive">↑0.2</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="widget-actions">
                            <span style="color: #8D99AE; font-size: 12px;">🎯 Just $15K away from target! | 📅 Next Review: Aug 15</span>
                        </div>
                    </div>
                    
                    <!-- Data Collection Status Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <span class="widget-icon">🔍</span>
                            <h2 class="widget-title">Regulatory Monitoring</h2>
                        </div>
                        <div class="widget-content">
                            <ul class="status-list">
                                <li class="status-item">
                                    <div class="status-left">
                                        <span class="status-indicator green"></span>
                                        <span class="status-name">SFC</span>
                                    </div>
                                    <span class="status-time">✅ 2h ago (234 docs)</span>
                                </li>
                                <li class="status-item">
                                    <div class="status-left">
                                        <span class="status-indicator green"></span>
                                        <span class="status-name">HKMA</span>
                                    </div>
                                    <span class="status-time">✅ 1h ago (156 docs)</span>
                                </li>
                                <li class="status-item">
                                    <div class="status-left">
                                        <span class="status-indicator yellow"></span>
                                        <span class="status-name">LegCo</span>
                                    </div>
                                    <span class="status-time">⚠️ 6h ago (89 docs)</span>
                                </li>
                            </ul>
                            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #EDF2F4;">
                                <div class="metric-label">Collection Health</div>
                                <div class="metric-value" style="font-size: 20px;">96.2%</div>
                            </div>
                        </div>
                        <div class="widget-actions">
                            <button class="btn btn-secondary" onclick="openModal('data-sources-modal')">View Details</button>
                            <button class="btn btn-primary" onclick="runDataCheck()">Run Check</button>
                        </div>
                    </div>
                    
                    <!-- AI Performance Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <span class="widget-icon">🤖</span>
                            <h2 class="widget-title">AI System Status</h2>
                        </div>
                        <div class="widget-content">
                            <div class="gauge-container">
                                <div class="gauge-value">92.4%</div>
                                <div class="gauge-label">Accuracy Rate</div>
                            </div>
                            <div class="performance-stats">
                                <div class="stat-item">
                                    <div class="stat-value">1,247</div>
                                    <div class="stat-label">Queries Today</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">2.1s</div>
                                    <div class="stat-label">Avg Response</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">4.7⭐</div>
                                    <div class="stat-label">User Rating</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value">✅</div>
                                    <div class="stat-label">Status</div>
                                </div>
                            </div>
                        </div>
                        <div class="widget-actions">
                            <button class="btn btn-secondary" onclick="openModal('ai-performance-modal')">Performance</button>
                            <button class="btn btn-primary" onclick="runAITest()">Test Now</button>
                        </div>
                    </div>
                    
                    <!-- Subscription Overview Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <span class="widget-icon">💰</span>
                            <h2 class="widget-title">Subscription Overview</h2>
                        </div>
                        <div class="widget-content">
                            <div class="donut-chart">
                                <div class="donut-center">
                                    <div class="donut-total">127</div>
                                    <div class="donut-label">Total Users</div>
                                </div>
                                <!-- Simplified donut representation -->
                                <svg width="120" height="120" viewBox="0 0 42 42">
                                    <circle cx="21" cy="21" r="15.915" fill="transparent" stroke="#EDF2F4" stroke-width="3"></circle>
                                    <circle cx="21" cy="21" r="15.915" fill="transparent" stroke="#40916C" stroke-width="3" 
                                            stroke-dasharray="70 30" stroke-dashoffset="25"></circle>
                                    <circle cx="21" cy="21" r="15.915" fill="transparent" stroke="#1B4332" stroke-width="3" 
                                            stroke-dasharray="25 75" stroke-dashoffset="95"></circle>
                                    <circle cx="21" cy="21" r="15.915" fill="transparent" stroke="#F77F00" stroke-width="3" 
                                            stroke-dasharray="5 95" stroke-dashoffset="20"></circle>
                                </svg>
                            </div>
                            <ul class="subscription-legend">
                                <li class="legend-item">
                                    <div class="legend-left">
                                        <span class="legend-color" style="background: #EDF2F4;"></span>
                                        <span>Free</span>
                                    </div>
                                    <span>89 (70%)</span>
                                </li>
                                <li class="legend-item">
                                    <div class="legend-left">
                                        <span class="legend-color" style="background: #40916C;"></span>
                                        <span>Pro</span>
                                    </div>
                                    <span>32 (25%)</span>
                                </li>
                                <li class="legend-item">
                                    <div class="legend-left">
                                        <span class="legend-color" style="background: #1B4332;"></span>
                                        <span>Enterprise</span>
                                    </div>
                                    <span>6 (5%)</span>
                                </li>
                            </ul>
                            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #EDF2F4;">
                                <div class="metric-label">Conversion Rate</div>
                                <div style="color: #40916C; font-weight: 600;">12.4% ↑</div>
                            </div>
                        </div>
                        <div class="widget-actions">
                            <button class="btn btn-secondary">Manage</button>
                            <button class="btn btn-primary">Analytics</button>
                        </div>
                    </div>
                    
                    <!-- Activity Feed Widget (2 column span) -->
                    <div class="widget widget-large">
                        <div class="widget-header">
                            <span class="widget-icon">📋</span>
                            <h2 class="widget-title">Recent Activity</h2>
                        </div>
                        <div class="widget-content">
                            <ul class="activity-feed">
                                <li class="activity-item">
                                    <div class="activity-icon" style="background: #E8F5E9;">🏢</div>
                                    <div class="activity-content">
                                        <div class="activity-text"><strong>"CryptoCorp HK"</strong> registered (Enterprise)</div>
                                        <div class="activity-time">2 minutes ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon" style="background: #FFF3E0;">📄</div>
                                    <div class="activity-content">
                                        <div class="activity-text">SFC circular <strong>SFC/21/145</strong> detected</div>
                                        <div class="activity-time">15 minutes ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon" style="background: #E3F2FD;">🎯</div>
                                    <div class="activity-content">
                                        <div class="activity-text">AI test completed: <strong>94.2% accuracy</strong></div>
                                        <div class="activity-time">1 hour ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon" style="background: #E8F5E9;">⬆️</div>
                                    <div class="activity-content">
                                        <div class="activity-text"><strong>john@lawfirm.hk</strong> upgraded to Pro</div>
                                        <div class="activity-time">2 hours ago</div>
                                    </div>
                                </li>
                                <li class="activity-item">
                                    <div class="activity-icon" style="background: #FFF3E0;">🔍</div>
                                    <div class="activity-content">
                                        <div class="activity-text">Monthly audit: <strong>5 corrections</strong> applied</div>
                                        <div class="activity-time">3 hours ago</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="widget-actions">
                            <button class="btn btn-secondary">View All Activity</button>
                            <button class="btn btn-secondary">Filter</button>
                            <button class="btn btn-primary">Export Log</button>
                        </div>
                    </div>
                    
                    <!-- System Alerts Widget -->
                    <div class="widget">
                        <div class="widget-header">
                            <span class="widget-icon">⚠️</span>
                            <h2 class="widget-title">Alerts & Tasks</h2>
                        </div>
                        <div class="widget-content">
                            <ul class="alert-list">
                                <li class="alert-item contextual-tip" data-tip="Click to investigate the LegCo collection issue">
                                    <span class="alert-indicator red" style="background: #D62828;"></span>
                                    <span class="alert-text">LegCo collection failed - investigating</span>
                                </li>
                                <li class="alert-item contextual-tip" data-tip="Performance optimization in progress">
                                    <span class="alert-indicator yellow" style="background: #F77F00;"></span>
                                    <span class="alert-text">5 users report slow UI - optimizing</span>
                                </li>
                                <li class="alert-item contextual-tip" data-tip="Scheduled for this weekend">
                                    <span class="alert-indicator green" style="background: #40916C;"></span>
                                    <span class="alert-text">AI training due in 3 days</span>
                                </li>
                                <li class="alert-item contextual-tip" data-tip="New user registrations awaiting review">
                                    <span class="alert-indicator" style="background: #277DA1;"></span>
                                    <span class="alert-text">12 pending approvals</span>
                                </li>
                            </ul>
                            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #EDF2F4;">
                                <div class="metric-label">Priority Score</div>
                                <div style="color: #F77F00; font-weight: 600;">Medium</div>
                            </div>
                        </div>
                        <div class="widget-actions">
                            <button class="btn btn-secondary" onclick="manageAlerts()">Manage Alerts</button>
                            <button class="btn btn-primary" onclick="dismissAlerts()">Dismiss All</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="footer">
                <div>System status: 🟢 All systems operational | Last sync: 2 min ago</div>
                <div>QReg Platform v2.1.0 | Powered by SnapAI</div>
            </footer>
        </main>
    </div>

    <!-- Data Sources Modal -->
    <div id="data-sources-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Regulatory Data Sources Status</h2>
                <button class="modal-close" onclick="closeModal('data-sources-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                    <div style="padding: 16px; border: 1px solid #EDF2F4; border-radius: 8px;">
                        <h3 style="color: #1B4332; margin-bottom: 12px;">🏛️ Securities & Futures Commission</h3>
                        <div style="margin-bottom: 8px;">Status: <span style="color: #40916C; font-weight: 600;">✅ Active</span></div>
                        <div style="margin-bottom: 8px;">Last Sync: 2 hours ago</div>
                        <div style="margin-bottom: 8px;">Documents: 234 new</div>
                        <div>Success Rate: 99.2%</div>
                    </div>
                    <div style="padding: 16px; border: 1px solid #EDF2F4; border-radius: 8px;">
                        <h3 style="color: #1B4332; margin-bottom: 12px;">🏦 Hong Kong Monetary Authority</h3>
                        <div style="margin-bottom: 8px;">Status: <span style="color: #40916C; font-weight: 600;">✅ Active</span></div>
                        <div style="margin-bottom: 8px;">Last Sync: 1 hour ago</div>
                        <div style="margin-bottom: 8px;">Documents: 156 new</div>
                        <div>Success Rate: 98.8%</div>
                    </div>
                    <div style="padding: 16px; border: 1px solid #F77F00; border-radius: 8px;">
                        <h3 style="color: #1B4332; margin-bottom: 12px;">🏛️ Legislative Council</h3>
                        <div style="margin-bottom: 8px;">Status: <span style="color: #F77F00; font-weight: 600;">⚠️ Warning</span></div>
                        <div style="margin-bottom: 8px;">Last Sync: 6 hours ago</div>
                        <div style="margin-bottom: 8px;">Documents: 89 new</div>
                        <div>Success Rate: 94.1%</div>
                    </div>
                </div>
                <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #EDF2F4;">
                    <h4 style="margin-bottom: 16px;">Collection Statistics</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; text-align: center;">
                        <div>
                            <div style="font-size: 24px; font-weight: 600; color: #40916C;">479</div>
                            <div style="color: #8D99AE; font-size: 12px;">Total Documents Today</div>
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: 600; color: #1B4332;">96.2%</div>
                            <div style="color: #8D99AE; font-size: 12px;">Overall Health Score</div>
                        </div>
                        <div>
                            <div style="font-size: 24px; font-weight: 600; color: #2B2D42;">1.2s</div>
                            <div style="color: #8D99AE; font-size: 12px;">Avg Response Time</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Performance Modal -->
    <div id="ai-performance-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">AI System Performance Details</h2>
                <button class="modal-close" onclick="closeModal('ai-performance-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 24px;">
                    <h4 style="margin-bottom: 16px;">Real-time Performance Metrics</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                        <div>
                            <div style="margin-bottom: 12px; font-weight: 500;">Accuracy Trend (Last 24h)</div>
                            <div style="height: 60px; background: linear-gradient(90deg, #40916C 0%, #52B788 50%, #40916C 100%); border-radius: 4px; position: relative; display: flex; align-items: end; padding: 8px;">
                                <div style="position: absolute; top: 8px; left: 8px; color: white; font-size: 12px;">92.4%</div>
                            </div>
                        </div>
                        <div>
                            <div style="margin-bottom: 12px; font-weight: 500;">Response Time (avg)</div>
                            <div style="height: 60px; background: linear-gradient(90deg, #277DA1 0%, #4D908E 50%, #277DA1 100%); border-radius: 4px; position: relative; display: flex; align-items: end; padding: 8px;">
                                <div style="position: absolute; top: 8px; left: 8px; color: white; font-size: 12px;">2.1s</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <h4 style="margin-bottom: 16px;">Quality Metrics</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div style="text-align: center; padding: 16px; background: #F8F9FA; border-radius: 8px;">
                            <div style="font-size: 20px; font-weight: 600; color: #40916C;">94.7%</div>
                            <div style="color: #8D99AE; font-size: 12px;">Precision Score</div>
                        </div>
                        <div style="text-align: center; padding: 16px; background: #F8F9FA; border-radius: 8px;">
                            <div style="font-size: 20px; font-weight: 600; color: #1B4332;">91.3%</div>
                            <div style="color: #8D99AE; font-size: 12px;">Recall Score</div>
                        </div>
                        <div style="text-align: center; padding: 16px; background: #F8F9FA; border-radius: 8px;">
                            <div style="font-size: 20px; font-weight: 600; color: #277DA1;">0.92</div>
                            <div style="color: #8D99AE; font-size: 12px;">F1 Score</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Modal functionality
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Interactive functionality with delightful feedback
        function runDataCheck() {
            const btn = event.target;
            const originalText = btn.textContent;
            const widget = btn.closest('.widget');
            
            btn.textContent = 'Checking sources...';
            btn.disabled = true;
            btn.classList.add('loading');
            
            // Add gentle loading state to widget
            widget.style.opacity = '0.8';
            
            setTimeout(() => {
                btn.textContent = 'Sources healthy ✨';
                btn.style.background = '#40916C';
                btn.classList.remove('loading');
                btn.classList.add('celebration');
                
                // Reset widget opacity
                widget.style.opacity = '1';
                
                // Show success feedback
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.disabled = false;
                    btn.style.background = '';
                    btn.classList.remove('celebration');
                    
                    // Add a subtle success indicator to the widget
                    const successIndicator = document.createElement('div');
                    successIndicator.innerHTML = '✓ Recently checked';
                    successIndicator.style.cssText = 'position: absolute; top: 8px; right: 8px; font-size: 10px; color: #40916C; opacity: 0.8;';
                    widget.style.position = 'relative';
                    widget.appendChild(successIndicator);
                    
                    setTimeout(() => {
                        successIndicator.remove();
                    }, 10000);
                }, 2000);
            }, 3000);
        }

        function runAITest() {
            const btn = event.target;
            const originalText = btn.textContent;
            const widget = btn.closest('.widget');
            const accuracyElement = widget.querySelector('.gauge-value');
            
            // Fun loading messages
            const loadingMessages = [
                'Warming up AI models...', 
                'Running diagnostics...', 
                'Testing accuracy...', 
                'Almost done...'
            ];
            
            btn.disabled = true;
            btn.classList.add('loading');
            widget.style.opacity = '0.8';
            
            let messageIndex = 0;
            const messageInterval = setInterval(() => {
                btn.textContent = loadingMessages[messageIndex];
                messageIndex++;
                if (messageIndex >= loadingMessages.length) {
                    clearInterval(messageInterval);
                }
            }, 1000);
            
            setTimeout(() => {
                clearInterval(messageInterval);
                
                // Simulate slight accuracy improvement
                const currentAccuracy = parseFloat(accuracyElement.textContent.replace('%', ''));
                const newAccuracy = Math.min(98, currentAccuracy + (Math.random() * 0.5));
                accuracyElement.textContent = newAccuracy.toFixed(1) + '%';
                
                btn.textContent = 'Performance improved! ✨';
                btn.style.background = '#40916C';
                btn.classList.remove('loading');
                btn.classList.add('celebration');
                widget.style.opacity = '1';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.disabled = false;
                    btn.style.background = '';
                    btn.classList.remove('celebration');
                }, 2500);
            }, 4000);
        }

        // Live data simulation with smooth transitions
        function updateLiveMetrics() {
            const subscribers = document.getElementById('subscriber-count');
            const revenue = document.getElementById('revenue-count');
            
            if (subscribers) {
                const currentCount = parseInt(subscribers.textContent);
                const newCount = Math.max(120, currentCount + Math.floor(Math.random() * 3) - 1);
                
                // Smooth number animation
                animateNumber(subscribers, currentCount, newCount, 1000);
            }
            
            if (revenue) {
                const currentAmount = parseInt(revenue.textContent.replace('$', '').replace('K', ''));
                const variation = Math.floor(Math.random() * 3) - 1;
                const newAmount = Math.max(280, Math.min(290, currentAmount + variation));
                
                animateNumber(revenue, currentAmount, newAmount, 1000, '$', 'K');
            }
        }
        
        // Smooth number animation helper
        function animateNumber(element, start, end, duration, prefix = '', suffix = '') {
            if (start === end) return;
            
            const startTime = performance.now();
            const difference = end - start;
            
            function updateNumber(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth animation
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = Math.round(start + (difference * easeOutQuart));
                
                element.textContent = prefix + current + suffix;
                
                if (progress < 1) {
                    requestAnimationFrame(updateNumber);
                }
            }
            
            requestAnimationFrame(updateNumber);
        }

        // Update metrics every 30 seconds
        setInterval(updateLiveMetrics, 30000);

        // Initialize page with delightful touches
        document.addEventListener('DOMContentLoaded', function() {
            // Add pulse effect to live indicators
            const liveElements = document.querySelectorAll('.status-indicator.green');
            liveElements.forEach(el => el.classList.add('pulse-indicator'));
            
            // Welcome message for admins
            setTimeout(() => {
                const header = document.querySelector('.header-title');
                const originalText = header.textContent;
                header.textContent = 'Welcome back, John! 👋';
                
                setTimeout(() => {
                    header.textContent = originalText;
                }, 3000);
            }, 1000);
            
            // Add gentle hover effects to metric cards
            const metricCards = document.querySelectorAll('.live-metric');
            metricCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'translateY(-2px)';
                });
                
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'translateY(0)';
                });
            });
            
            // Notification badge pulse for new notifications
            const badge = document.querySelector('.notification-badge');
            if (badge) {
                badge.addEventListener('click', () => {
                    const count = badge.querySelector('.notification-count');
                    if (count) {
                        count.style.transform = 'scale(0)';
                        count.style.transition = 'transform 0.3s ease';
                        
                        setTimeout(() => {
                            count.textContent = '0';
                            count.style.display = 'none';
                        }, 300);
                    }
                });
            }
            
            // Preserve sidebar scroll position
            const sidebar = document.querySelector('.sidebar');
            
            // Restore scroll position on page load
            const savedScrollPos = sessionStorage.getItem('sidebarScrollPos');
            if (savedScrollPos && sidebar) {
                sidebar.scrollTop = parseInt(savedScrollPos);
            }
            
            // Save scroll position before page unload
            window.addEventListener('beforeunload', function() {
                if (sidebar) {
                    sessionStorage.setItem('sidebarScrollPos', sidebar.scrollTop);
                }
            });
        });
    </script>
</body>
</html>